<div id="main"></div>

<form action="/books" method="get" id="search_form">
  <div class="columns">
    <div class="column">
      <div class="field has-addons">
        <div class="field has-addons">
          <div class="control">
            <input class="input" type="text" id="search" name="search" placeholer="Look for a book"><br>
          </div>
        </div>
        <div class="control">
          <input class="button is-info" type="submit" value="Search">
        </div>
      </div>
    </div>

    <div class="column">
      <div class="dropdown">
        <div class="dropdown-trigger">
          <button type="button" class="button" aria-haspopup="true" aria-controls="dropdown-menu">
            <span>Genres</span>
            <span class="icon is-small"><i class="fas fa-angle-down" aria-hidden="true"></i></span>
          </button>
        </div>
        <div class="dropdown-menu" id="dropdown-menu" role="menu">
          <div class="dropdown-content">
            <div class="dropdown-item">
              <div class="select is-primary is-multiple">
                <select form="search_form" multiple name="Genre" size="<% @genres_size %>">
                  <% @genres.each do |genre|  %>
                    <option><%= genre  %></option>
                    <hr class="dropdown-divider">
                <% end %>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<table class="table is-bordered is-striped is-hoverable is-fullwidth">
  <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Genre</th>
      <th><abbr title="Subcategory">SC</abbr></th>
      <th>Shelf</th>
      <th>Rack</th>
      <th><abbr title="Comic Book">CB</abbr></th>
      <th>Note</th>
      <th>Author</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each_with_index do |book, index| %>
      <tr class="">
        <td><%= index + 1  %></td>
        <td><%= book.name %></td>
        <td><%= book.genre %></td>
        <td><%= book.subcategory %></td>
        <td><%= book.shelf %></td>
        <td><%= book.rack %></td>
        <td><%= book.comic_book ? 'Tak' : 'Nie' %></td>
        <td><%= book.note %></td>
        <td><%= book.authors.map(&:name).join(", ") %></td>
      </tr>
    <% end %>
  </tbody>
</table>
